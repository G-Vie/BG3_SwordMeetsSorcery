new entry "EXTRA_ATTACK_MARTIAL_SORCERY"
type "StatusData"
data "StatusType" "BOOST"
using "EXTRA_ATTACK"
data "Icon" "PassiveFeature_WarMagic"
data "StackId" "EXTRA_ATTACK_MARTIAL_SORCERY"
data "Boosts" "UnlockSpellVariant(MainHand_ExtraAttackCheck(),ModifyUseCosts(Replace,BonusActionPoint,1,0,ActionPoint),ModifyIconGlow(),ModifyTooltipDescription())"
data "RemoveConditions" "((HasStringInSpellRoll('MeleeWeaponAttack') or HasStringInSpellRoll('UnarmedAttack') or SpellId('Target_CommandersStrike')) and HasUseCosts('ActionPoint') and not IsOffHandAttack()) or not HasActionResource('BonusActionPoint', 1, 0, false, false)"

new entry "EXTRA_ATTACK_MARTIAL_SORCERY_Q"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "h9857b3b0g7582g48c9g95bdg6c96e2a2afcb;1"
data "TickType" "StartTurn"
data "RemoveConditions" "(not IsStatusEvent(StatusEvent.OnSpellCast) and not GVIE_HasHigherPriorityExtraAttackQueued('EXTRA_ATTACK_MARTIAL_SORCERY_Q') and not GVIE_HasAnyExtraAttack()) or (IsStatusEvent(StatusEvent.OnSpellCast) and not HasActionResource('BonusActionPoint', 1, 0, false, false))"
data "RemoveEvents" "OnStatusRemoved"
data "StatusPropertyFlags" "DisableCombatlog;DisableOverhead;DisablePortraitIndicator"
data "OnRemoveFunctors" "IF(RemoveCause(StatusRemoveCause.Condition) and HasActionResource('BonusActionPoint', 1, 0, false, false)):ApplyStatus(EXTRA_ATTACK_MARTIAL_SORCERY, 100, 1)"
